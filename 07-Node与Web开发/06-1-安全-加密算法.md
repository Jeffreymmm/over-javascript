## 一 密码学概述

### 1.0 加密算法分类

常用的加密算法有三类：

- 哈希算法：不可逆
- 加密解密算法：通过秘钥实现加密解密，是可逆的
- 编码解码算法：无需秘钥，是可逆的，如 Base64，但是严格意义上来说该类算法只是一种数据编码格式

### 1.1 哈希算法

哈希算法其实是一种消息摘要实现技术，hash 是剁碎的意思，所以也称呼 hash 为散列。

哈希算法能让任意长度的二进制值映射为较短的固定长度的二进制值，并且不同明文基本上不会映射为相同的 Hash 值。

哈希算法加密不可逆，常见的算法有：md4、md5、hash1、SHA256、SHA3 等。

例如一段字符串`hello world`，经过 md5 加密后转换成了：`5eb63bbbe01eeed093cb22bb8f5acdc3`，该密文是无法返回到原始的明文的。

不过哈希算法必须解决冲突问题，即不同的数据通过哈希算法产生了相同的输出，MD5，SHA-1 算法都已经被证明不具备”强抗碰撞性“，不足以应对要求很高的商业场景。

为了提升哈希算法的安全性，推荐使用 SHA-2，该算法是 SHA-256,SHA-512 等算法的并称。

不过 MD5 仍然被大量用于网站的登录中，如下所示：

![](../images/node/04-01.png)

利用彩虹表攻击，哈希算法变得很脆弱，可以通过加盐的方式提升安全性：

![](../images/node/04-02.png)

### 1.2 加密解密算法-对称加密

对称加密（datar encryption algorithm，DEA）也称为私钥加密算法、单秘钥算法，常见的对称加密算法有：DES,3DES,AES 等。

对称加密的特点：

- 加密和解密的秘钥相同
- 运算效率加高

对称加密由于加密方和解密方需要共享秘钥，所以容易泄露，如下所示：

![](../images/node/04-03.png)

DES 目前是非常安全的加密方式，只有穷举法才可以破解。

### 1.3 加密解密算法-非对称加密

非对称加密也称呼为公钥加密，最著名的非对称加密算法是 RSA、椭圆曲线算法 ECC。

非对称加密的特点：加密和解密分别使用两个不同的秘钥。使用其中一个秘钥对明文加密得到的密文，只有另外一个秘钥才能解密得到明文！而且这 2 个秘钥只在数学上有关，即使知道了其中一个，也无法计算出另外一个，所以一个可以公开，任意发布，一个不公开，由用户保管，绝对不同通过任何途径传输。

这两个秘钥分别是：

- 公钥：公开秘钥，公钥可以向外任意发布。
- 私钥：私有秘钥，私钥由用户存储，私钥不能通过任何渠道传输

总结如下：

- 公开密钥和私有密钥是一对
- 如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密。
- 如果用私有密钥对数据进行加密，只有用对应的公开密钥才能解密。
- 因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法。

步骤如下：
![](../images/node/04-04.png)

非对称加密中用于解密的私钥是不公开、不进行传输的，所以安全性较高，但是相对的，也增加了运算时间。

### 1.4 加解密算法

加密解密算法包括三种：

- 对称加密：包括 DES、3DES、AES 等
- 非对称加密：包括 RSA 算法、椭圆曲线加密算法
- 数字签名算法 DSA

编码解码算法常见的有 Base64 编码解码，Base58 编码解码。

### 1.5 数字签名与验证

非对称加密中双方进行通信的加密解密过程：

- 1.A 要向 B 发送信息，A 和 B 都要产生一对用于加密和解密的公钥和私钥
- 2.A 的私钥保密，A 的公钥告诉 B；B 的私钥保密，B 的公钥告诉 A。
- 3.A 要给 B 发送信息时，A 用 B 的公钥加密信息，因为 A 知道 B 的公钥。
- 4.A 将这个消息发给 B（已经用 B 的公钥加密消息）。
- 5.B 收到这个消息后，B 用自己的私钥解密 A 的消息。其他所有收到这个报文的人都无法解密，因为只有 B 才有 B 的私钥。

通过公钥加密、私钥解密的过程，称为数字签名、验证签名。数字签名有两部分组成：

- 使用私钥从消息中创建签名
- 允许任何人验证签名

数字签名主要用于验证双方的数据是否被串改，数字签名与加密解密不是一个概念！

非对称加密找那个双方进行通信时，不但要对消息进行加密解密，也要执行数字签名与验证：

![](../images/node/04-05.png)
